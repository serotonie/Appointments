!function(){"use strict";let t=document.getElementById("tokenSwissPost");function n(){let e=document.getElementById("list");null!=e&&e.remove()}function d(e){if(""!=e.originalTarget.value){let t="https://wedec.post.ch/api/address/v1/zips?"+new URLSearchParams({zipCity:e.originalTarget.value,type:"DOMICILE"}),n=sessionStorage.getItem("tokenSwissPost");fetch(t,{headers:{Authorization:n}}).then((e=>e.json())).then((t=>r(e.originalTarget,t.zips)))}else r(e.originalTarget,[])}function i(e){if(""!=e.originalTarget.value){let t=document.getElementById("srgdev-ncfp_fnpa"),n="https://wedec.post.ch/api/address/v1/streets?"+new URLSearchParams({name:e.originalTarget.value,zip:t.value,type:"DOMICILE"}),d=sessionStorage.getItem("tokenSwissPost");fetch(n,{headers:{Authorization:d}}).then((e=>e.json())).then((t=>r(e.originalTarget,t.streets)))}else r(e.originalTarget,[])}function a(e){if(""!=e.originalTarget.value){let t=document.getElementById("srgdev-ncfp_fnpa"),n=document.getElementById("srgdev-ncfp_fadress"),d="https://wedec.post.ch/api/address/v1/houses?"+new URLSearchParams({zip:t.value,streetname:n.value,number:e.originalTarget.value}),i=sessionStorage.getItem("tokenSwissPost");fetch(d,{headers:{Authorization:i}}).then((e=>e.json())).then((t=>r(e.originalTarget,t.houses)))}else r(e.originalTarget,{})}function r(e,t){let n,d=document.getElementById("list");null!=d&&d.remove();let i=document.createElement("ul");i.setAttribute("id","list"),e.after(i);let a=0;t.forEach((function(t){n=document.createElement("LI"),n.id=e.name+a,n.classList.add("listItems"),"npa"===e.name?n.innerHTML="".concat(t.zip," ").concat(t.city18):"adress"!==e.name&&"number"!==e.name||(n.innerHTML=t),n.addEventListener("click",s),i.appendChild(n),a++})),""===i.innerHTML&&i.remove()}function s(e){if(document.getElementById("list").remove(),e.target.id.includes("npa")){let t=document.getElementById("srgdev-ncfp_fnpa"),n=document.getElementById("srgdev-ncfp_ftown"),d=e.originalTarget.innerHTML.substring(0,e.originalTarget.innerHTML.indexOf(" ")),i=e.originalTarget.innerHTML.substring(e.originalTarget.innerHTML.indexOf(" ")+1);t.value=d,n.value=i}else if(e.target.id.includes("adress")){let t=document.getElementById("srgdev-ncfp_fadress"),n=e.originalTarget.innerHTML;t.value=n;let d={};d.originalTarget=document.getElementById("srgdev-ncfp_fnumber"),a(d)}else if(e.target.id.includes("number")){let t=document.getElementById("srgdev-ncfp_fnumber"),n=e.originalTarget.innerHTML;t.value=n}}function l(){let e=document.getElementById("srgdev-ncfp_fbtn");this.checked?e.hasAttribute("shade")&&e.removeAttribute("shade"):e.hasAttribute("shade")||e.setAttribute("shade","1"),this.hasAttribute("err")&&this.removeAttribute("err"),this.hasAttribute("required")&&this.removeAttribute("required")}function o(){this.setCustomValidity(""),this.getAttribute("err")?(this.removeAttribute("err"),this.removeEventListener("focus",o,!1)):this.removeEventListener("input",o,!1)}function u(e){let t=0;const n={};document.getElementById("srgdev-ncfp_frm").getAttribute("data-translations").split(",").forEach((e=>{const t=e.split(":");n[t[0]]=t[1]}));let d=document.getElementById("srgdev-ncfp_fbtn");if(!0===d.disabled)return e.preventDefault(),e.stopPropagation(),!1;d=document.getElementById("srgdev-ncfp_sel-hidden");let i,a=d.selectedIndex;-1===a||""===d.value?(d=document.getElementById("srgdev-ncfp_sel-dummy"),d.setAttribute("err","err"),d.addEventListener("focus",o,!1),t=1):i=d.dataRef[a].tzi,d=document.getElementById("srgdev-ncfp_talk_type"),null!==d&&(a=d.selectedIndex,1!==a&&2!==a&&(d.setAttribute("err","err"),d.addEventListener("focus",o,!1),t=1)),d=document.getElementById("srgdev-ncfp_fname"),d.value.length<2&&(d.setCustomValidity(n.name_required),d.addEventListener("input",o,!1),0===t&&d.reportValidity(),t=1),d=document.getElementById("srgdev-ncfp_femail"),(d.value.length<5||-1===d.value.indexOf("@")||d.value.indexOf("@")>d.value.lastIndexOf("."))&&(d.setCustomValidity(n.email_required),d.addEventListener("input",o,!1),0===t&&d.reportValidity(),t=1),d=document.getElementById("srgdev-ncfp_fphone"),null!==d&&(""===d.value||d.value.length<9||!1===/^[0-9 .()\-+,/]*$/.test(d.value))&&(d.setCustomValidity(n.phone_required),d.addEventListener("input",o,!1),0===t&&d.reportValidity(),t=1);let r=document.getElementById("srgdev-ncfp-main-inputs").children;for(let e,d=0,i=r.length;d<i;d++)if(e=r[d],e.hasAttribute("data-more")&&("INPUT"===e.tagName||"TEXTAREA"===e.tagName)){let d=e.value.trim();"r1"===e.getAttribute("data-more")&&""===d?(e.setCustomValidity(n.required),e.addEventListener("input",o,!1),0===t&&e.reportValidity(),t=1):e.hasAttribute("type")&&"number"===e.getAttribute("type")&&isNaN(d)&&(e.setCustomValidity(n.number_required),e.addEventListener("input",o,!1),0===t&&e.reportValidity(),t=1)}if(d=document.getElementById("appt_gdpr_id"),null!==d&&!1===d.checked&&(d.setAttribute("err","err"),d.setAttribute("required","1"),t=1),0!==t)return e.preventDefault(),e.stopPropagation(),!1;document.getElementById("srgdev-ncfp_fbtn-spinner").style.display="inline-block",d=document.createElement("input"),d.type="hidden",d.name="tzi",d.value=i,this.appendChild(d)}function c(e){document.body.removeEventListener("keyup",m),document.getElementById("srgdev-ncfp_frm").removeEventListener("focusin",p),null===e&&(e=document.getElementById("srgdev-dpu_main-cont")),e.removeAttribute("data-open")}function m(t){"Escape"!==t.key&&"Esc"!==t.key&&27!==t.keyCode||(c(null),e.preventDefault())}function p(e){e.target&&"DIV"!==e.target.nodeName.toUpperCase()&&"SPAN"!==e.target.nodeName.toUpperCase()&&document.getElementById("srgdev-dpu_main-date").firstAvailble.focus()}function g(e){let t=document.getElementById("srgdev-dpu_main-cont");if(null===t.getAttribute("data-open")){t.setAttribute("data-open",""),document.body.addEventListener("keyup",m);const e=document.getElementById("srgdev-dpu_main-date").curActive;e&&-1===e.indexOf("e")&&document.getElementById("srgdev-dpu_dc"+e).focus(),document.getElementById("srgdev-ncfp_frm").addEventListener("focusin",p)}else c(t);return e.preventDefault(),!1}function f(e){if(I(e)||C(e)){const e=document.getElementById("srgdev-dpu_tc_wrap");e&&e.firstChild.focus()}}function v(e){let t=this.id.slice(13),n=this.parentElement.curActive;if(n===t)return;n||(n=t);const d=+(""+t).replace("e",""),i=document.getElementById("srgdev-dpu_bf-cont"),a=Math.floor(d/5);a!==i.curDP&&(i.curDP=a,E(i)),document.getElementById("srgdev-dpu_dc"+n).removeAttribute("data-active"),document.getElementById("srgdev-dpu_dc"+t).setAttribute("data-active",""),this.parentElement.curActive=t,"e"===t.slice(-1)&&(t="e");const r=document.getElementById("srgdev-dpu_main-time");if(!r)throw new Error("srgdev-dpu_main-time missing");for(;r.firstChild;)r.removeChild(r.lastChild);if("e"!==t){const e=r.timePages[t];let n=document.createElement("div");if(n.className="srgdev-dpu-tc-full-date",n.appendChild(document.createTextNode(e.fullDate)),""!==e.tzn){const t=document.createElement("div");t.className="srgdev-dpu-tc-timezone",t.appendChild(document.createTextNode(e.tzn)),n.appendChild(t)}r.appendChild(n);const d=i.tuClass,a=document.createElement("div");a.className="srgdev-dpu-tc-tu-wrap",a.id="srgdev-dpu_tc_wrap",a.setAttribute("data-dm",e.dataDm),e.timeItems.forEach((e=>{const t=document.createElement("span");if(t.className=d,t.dpuClickID=e.dpuClickID,t.timeAt=e.timeAt,t.appendChild(document.createTextNode(e.time)),""!==e.title){const n=document.createElement("span");n.className="srgdev-dpu-appt-title",n.appendChild(document.createTextNode(e.title)),t.appendChild(n)}t.setAttribute("tabindex","0"),a.appendChild(t)})),r.appendChild(a)}else{const e=document.createElement("div");e.id="srgdev-dpu_tce",e.className="srgdev-dpu-time-cont",e.appendChild(document.createTextNode(document.getElementById("srgdev-ncfp_sel-hidden").getAttribute("data-tr-not-available"))),r.appendChild(e)}this.parentElement.parentElement.scrollLeft=0,e.stopPropagation()}function h(e){let t=e.target;if(void 0!==t.parentElement.dpuClickID&&(t=t.parentElement),void 0!==t.dpuClickID){document.getElementById("srgdev-ncfp_sel-dummy").value=t.parentElement.getAttribute("data-dm")+" - "+t.timeAt;let e=document.getElementById("srgdev-ncfp_sel-hidden");e.selectedIndex=t.dpuClickID,e.value=e.dataRef[t.dpuClickID].d;const n=e.dataRef[t.dpuClickID].dur;e=document.getElementById("srgdev-ncfp_dur-cont");const d=e.getAttribute("data-tr-hr"),i=e.getAttribute("data-tr-mn"),a=function(e){let t="";const n=e/60|0;n>0&&(t+=n+d+" ");const a=e-60*n;return t+(a>0?a+i:"")};if(null===n||1===n.length)e.style.display="none";else{const t=e.lastElementChild.children;t[0].textContent=a(n[0]);for(let d,i=1,r=Math.max(t.length,n.length);i<r;i++){if(i>=t.length)d=document.createElement("option"),d.className="srgdev-ncfp-form-option",d.appendChild(document.createTextNode("")),e.lastElementChild.appendChild(d);else if(d=t[i],i>=n.length){d.style.display="none";continue}d.style.display="block",d.value=i,d.textContent=a(n[i])}e.style.display="block"}e.lastElementChild.value=0,c(null)}}function E(e){let t;void 0!==e.target?(t=e.target.parentElement,"srgdev-dpu_bf-back"===e.target.id?t.curDP>0&&t.curDP--:(t.curDP<t.maxDP&&t.curDP++,t.curDP===t.maxDP?e.target.setAttribute("disabled",""):e.target.removeAttribute("disabled"))):t=e,0===t.curDP?t.firstElementChild.setAttribute("disabled",""):t.firstElementChild.removeAttribute("disabled"),t.curDP===t.maxDP?t.lastElementChild.setAttribute("disabled",""):t.lastElementChild.removeAttribute("disabled"),document.getElementById("srgdev-dpu_main-date").style.left="-"+5*t.curDP*4.6+"em",document.getElementById("srgdev-dpu_main-cont").scrollLeft=0}function y(e){if(void 0!==e.changedTouches&&e.changedTouches.length>0){const t=e.changedTouches[0],n=this.touchInfo;n.x=t.clientX,n.y=t.clientY,n.id=t.identifier}}function b(e){if(void 0!==e.changedTouches&&e.changedTouches.length>0){const t=e.changedTouches[0],n=this.touchInfo;if(t.identifier===n.id){const e=t.clientX-n.x|0,d=t.clientY-n.y|0;let i=e>>31,a=e+i^i;i=d>>31,a>(d+i^i)&&a>50&&(e<0?this.bfNav.lastElementChild.click():this.bfNav.firstElementChild.click())}n.id=-1}}function I(e){return" "===e.key||"Space"===e.code||32===e.keyCode}function C(e){return"Enter"===e.key||"Enter"===e.code||13===e.keyCode}sessionStorage.setItem("tokenSwissPost",t.innerHTML),t.remove(),window.addEventListener("DOMContentLoaded",(function(){let e=document.getElementById("appt_gdpr_id");null!==e&&(e.addEventListener("change",l),l.apply(e)),document.getElementById("srgdev-ncfp_fnpa").addEventListener("input",d),document.getElementById("srgdev-ncfp_fadress").addEventListener("input",i),document.getElementById("srgdev-ncfp_fnumber").addEventListener("input",a),document.addEventListener("click",n);let t=document.getElementById("srgdev-ncfp_frm");t.addEventListener("submit",u),setTimeout((function(){t.autocomplete="on"}),1e3),function(e){const t="nbrWeeks",n="showEmpty",d="startFNED",i="showWeekends",a="showTZ",r="time2Cols",s="endTime";let l={},o=e.split(".");for(let e,t=o.length,n=0;n<t;n++)e=o[n].split(":"),l[e[0]]=+e[1];let u=7*l[t],m=document.getElementById("srgdev-ncfp_sel-hidden");if("2"!==m.getAttribute("data-state"))return void console.log("data-state: ",m.getAttribute("data-state"));const p=m.getAttribute("data-hdr"),g=m.getAttribute("data-tr-back"),T=m.getAttribute("data-tr-next");let A,_;A=void 0!==window.monthNames?window.monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],_=void 0!==window.dayNames?window.dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];const D=window.Intl&&"object"==typeof window.Intl,L=document.documentElement.hasAttribute("data-locale")?[document.documentElement.getAttribute("data-locale").replaceAll("_","-"),document.documentElement.lang]:[document.documentElement.lang];let k,B,w,x,N;if(k=D?new Intl.DateTimeFormat(L,{hour:"numeric",minute:"2-digit"}).format:function(e){return e.toLocaleTimeString()},D){let e=new Intl.DateTimeFormat(L,{month:"long"});B=e.format}else B=function(e){return A[e.getMonth()]};if(D){let e=new Intl.DateTimeFormat(L,{weekday:"short"});w=e.format}else w=function(e){return _[e.getDay()]};x=D?new Intl.DateTimeFormat(L,{weekday:"short",month:"long",day:"2-digit"}).format:function(e){return e.toDateString()},N=D?new Intl.DateTimeFormat(L,{weekday:"long",month:"long",day:"numeric",year:"numeric"}).format:function(e){return e.toLocaleDateString()};let P,S=[];if(D){try{P=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){console.log("no Intl timeZone ",e)}"string"!=typeof P&&(P=void 0)}for(let e,t,n,d,i,a,r,o,u,c,p=new Date,g=l[s],f=m.getAttribute("data-info").split(","),v=f.length,h=0;h<v;h++){if(c=f[h],a=c.indexOf(":",8),p.setTime(1e3*+c.substr(1,a-1)),e=p.getTimezoneOffset(),n=c.charAt(0),d=i=k(p),u=p.getTime(),o=null,1!==g&&"T"!==n||(r=a+1,a=c.indexOf(":",r),"T"===n?(o=c.substr(r,a-r).split(";").map((e=>0|e)),1===g&&o.length<2&&(p.setTime(u+6e4*o[0]),d+=" - "+k(p))):(r=1e3*+c.substr(r,a-r),p.setTime(r),d+=" - "+k(p))),void 0!==P)t=n+P;else{let d=Math.abs(e),i=Math.floor(d/60),a=d-60*i;t=n+(e>0?"-":"+")+(i<10?"0"+i:i)+(a<10?"0"+a:a)}a++,r=c.indexOf(":",a),S[h]={rts:u,d:c.substr(a,r-a),t:c.substr(r+2),dur:o,tzi:t,time:d,timeAt:i}}S.sort(((e,t)=>e.rts>t.rts?1:-1)),S.push({rts:0,d:"",t:"",tzi:"",time:""}),m.dataRef=S;let M=S.length,z=document.createElement("div");z.id="srgdev-dpu_main-cont",z.className="srgdev-dpu-bkr-cls";let O=document.createElement("div");O.id="srgdev-dpu_main-header",O.appendChild(document.createTextNode(p)),z.appendChild(O);let H=document.createElement("div");H.maxDP=0,H.curDP=0,H.tuClass="",H.id="srgdev-dpu_bf-cont",H.appendChild(document.createElement("span")),H.appendChild(document.createElement("span")),H.firstElementChild.id="srgdev-dpu_bf-back",H.firstElementChild.appendChild(document.createTextNode(g)),H.firstElementChild.addEventListener("click",E),H.firstElementChild.setAttribute("disabled",""),H.lastElementChild.id="srgdev-dpu_bf-next",H.lastElementChild.appendChild(document.createTextNode(T)),H.lastElementChild.addEventListener("click",E),z.appendChild(H),O=document.createElement("div"),O.id="srgdev-dpu_main-date",O.className="srgdev-dpu-bkr-cls",O.style.left="0em",function(e,t){e.touchInfo={x:0,y:0,id:-1},e.bfNav=t,e.addEventListener("touchstart",y),e.addEventListener("touchend",b)}(O,H),z.appendChild(O);let V=document.createElement("div");V.id="srgdev-dpu_main-time",z.appendChild(V);let F,R=0,q=5,U=new Date,j=-1,Z=-1,J=!1,W=function(e,t){let n=document.createElement("div");n.id="srgdev-dpu_dc"+R+(t?"e":""),n.className="srgdev-dpu-date-cont"+(t?" srgdev-dpu-dc-empty":"");let d=document.createElement("span");return d.className=0!==e.getDay()?"srgdev-dpu-date-wd":"srgdev-dpu-date-wd srgdev-dpu-date-wd-sunday",d.appendChild(document.createTextNode(w(e))),n.appendChild(d),d=document.createElement("span"),d.className="srgdev-dpu-date-dn",d.appendChild(document.createTextNode(e.getDate())),n.appendChild(d),d=document.createElement("span"),d.className="srgdev-dpu-date-md",d.appendChild(document.createTextNode(B(e))),n.appendChild(d),n.addEventListener("click",v),t||(n.setAttribute("tabindex","0"),n.addEventListener("focus",v),n.addEventListener("keyup",f)),R===q&&(q+=5,H.maxDP++,R>u&&(J=!0)),++R,n},X=new Date;if(X.setSeconds(1),X.setMinutes(0),X.setHours(0),1===l[n]&&0===l[d]){let e=S[0].rts;U.setTime(e),U.setSeconds(1),U.setMinutes(0),U.setHours(0);let t=U.getDay();t>0&&t<6&&X.setTime(U.getTime()-864e5*(t-1))}0===l[r]||1===l[s]?H.tuClass="srgdev-dpu-time-unit"+(1===l[s]?"_tn":""):H.tuClass="srgdev-dpu-time-unit2",F=1===l[a]&&D?function(e){const t=e.toLocaleDateString(L),n=e.toLocaleDateString(L,{timeZoneName:"long"}),d=n.indexOf(t);return d>=0?(n.substring(0,d)+n.substring(d+t.length)).replace(/^[\s,.\-:;]+|[\s,.\-:;]+$/g,""):n}:function(){return""};const Y=[];for(let e,t,d,a,r,s,o,u=0;u<M&&(s=S[u],e=s.rts,0!==e);u++){U.setTime(e);let c=100*(U.getMonth()+1)+U.getDate();if(j!==c){if(a=X.getTime(),X.setTime(U.getTime()),X.setSeconds(1),X.setMinutes(0),X.setHours(0),d=X.getTime(),1===l[n])for(;a<d&&(X.setTime(a),t=0===l[i]?X.getDay():1,0===t||6===t||(O.appendChild(W(X,!0)),Y.push({lccIdx:-1,dataDm:"",timeItems:[],fullDate:"",tzn:""}),!J));)a+=864e5;if(J){U=X;break}X.setTime(a+864e5),r=W(U,!1),-1===Z&&(Z=R-1,r.setAttribute("data-active",""),O.firstAvailble=r),O.appendChild(r),o={lccIdx:R-1,dataDm:x(U),timeItems:[],fullDate:N(U),tzn:F(U)},Y.push(o),j=c}o.timeItems.push({dpuClickID:u,timeAt:s.timeAt,time:s.time,title:s.t})}U.setSeconds(0),U.setMinutes(0),U.setHours(1),U.setTime(U.getTime()+864e5),V.timePages=Y,z.addEventListener("click",h),z.addEventListener("keyup",(function(e){(I(e)||C(e))&&h(e)})),document.getElementById("srgdev-ncfp_sel_cont").appendChild(z),O.firstAvailble.click(),O.curActive=Z.toString();let $=Math.floor(Z/5);$>0&&(H.curDP=$,E(H)),H=document.createElement("div"),H.id="srgdev-dpu_main-hdr-icon",H.className="icon-close",H.addEventListener("click",(function(){c(null)})),H.role="button",H.addEventListener("keyup",(function(e){(I(e)||C(e))&&c(null)})),H.setAttribute("tabindex","0"),z.appendChild(H)}(t.getAttribute("data-pps")),document.getElementById("srgdev-ncfp_sel-dummy").addEventListener("click",g),document.getElementById("srgdev-ncfp_sel-dummy").addEventListener("keyup",(function(e){I(e)&&g(e)})),setTimeout((function(){let e,t=document.getElementById("srgdev-ncfp_fbtn");e=t.hasAttribute("data-tr-ses-to")?t.getAttribute("data-tr-ses-to"):"Session Timeout. Reload.",t.disabled=!0,t.textContent=e}),9e5)}))}();