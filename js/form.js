!function(){"use strict";let t=document.getElementById("tokenSwissPost");function n(e){if(""!=e.originalTarget.value){let t="https://wedec.post.ch/api/address/v1/zips?"+new URLSearchParams({zipCity:e.originalTarget.value,type:"DOMICILE"}),n=sessionStorage.getItem("tokenSwissPost");fetch(t,{headers:{Authorization:n}}).then((e=>e.json())).then((t=>a(e.originalTarget,t.zips)))}else a(e.originalTarget,[])}function d(e){if(""!=e.originalTarget.value){let t=document.getElementById("srgdev-ncfp_fnpa"),n="https://wedec.post.ch/api/address/v1/streets?"+new URLSearchParams({name:e.originalTarget.value,zip:t.value,type:"DOMICILE"}),d=sessionStorage.getItem("tokenSwissPost");fetch(n,{headers:{Authorization:d}}).then((e=>e.json())).then((t=>a(e.originalTarget,t.streets)))}else a(e.originalTarget,[])}function i(e){if(""!=e.originalTarget.value){let t=document.getElementById("srgdev-ncfp_fnpa"),n=document.getElementById("srgdev-ncfp_fadress"),d="https://wedec.post.ch/api/address/v1/houses?"+new URLSearchParams({zip:t.value,streetname:n.value,number:e.originalTarget.value}),i=sessionStorage.getItem("tokenSwissPost");fetch(d,{headers:{Authorization:i}}).then((e=>e.json())).then((t=>a(e.originalTarget,t.houses)))}else a(e.originalTarget,{})}function a(e,t){let n,d=document.getElementById("list");null!=d&&d.remove();let i=document.createElement("ul");i.setAttribute("id","list"),e.after(i);let a=0;t.forEach((function(t){n=document.createElement("LI"),n.id=e.name+a,n.classList.add("listItems"),"npa"===e.name?n.innerHTML=`${t.zip} ${t.city18}`:"adress"!==e.name&&"number"!==e.name||(n.innerHTML=t),n.addEventListener("click",r),i.appendChild(n),a++})),""===i.innerHTML&&i.remove()}function r(e){if(document.getElementById("list").remove(),e.target.id.includes("npa")){let t=document.getElementById("srgdev-ncfp_fnpa"),n=document.getElementById("srgdev-ncfp_ftown"),d=e.originalTarget.innerHTML.substring(0,e.originalTarget.innerHTML.indexOf(" ")),i=e.originalTarget.innerHTML.substring(e.originalTarget.innerHTML.indexOf(" ")+1);t.value=d,n.value=i}else if(e.target.id.includes("adress")){let t=document.getElementById("srgdev-ncfp_fadress"),n=e.originalTarget.innerHTML;t.value=n;let d={};d.originalTarget=document.getElementById("srgdev-ncfp_fnumber"),i(d)}else if(e.target.id.includes("number")){let t=document.getElementById("srgdev-ncfp_fnumber"),n=e.originalTarget.innerHTML;t.value=n}}function s(){let e=document.getElementById("srgdev-ncfp_fbtn");this.checked?e.hasAttribute("shade")&&e.removeAttribute("shade"):e.hasAttribute("shade")||e.setAttribute("shade","1"),this.hasAttribute("err")&&this.removeAttribute("err"),this.hasAttribute("required")&&this.removeAttribute("required")}function l(){this.setCustomValidity(""),this.getAttribute("err")?(this.removeAttribute("err"),this.removeEventListener("focus",l,!1)):this.removeEventListener("input",l,!1)}function o(e){let t=0;const n={};document.getElementById("srgdev-ncfp_frm").getAttribute("data-translations").split(",").forEach((e=>{const t=e.split(":");n[t[0]]=t[1]}));let d=document.getElementById("srgdev-ncfp_fbtn");if(!0===d.disabled)return e.preventDefault(),e.stopPropagation(),!1;d=document.getElementById("srgdev-ncfp_sel-hidden");let i,a=d.selectedIndex;-1===a||""===d.value?(d=document.getElementById("srgdev-ncfp_sel-dummy"),d.setAttribute("err","err"),d.addEventListener("focus",l,!1),t=1):i=d.dataRef[a].tzi,d=document.getElementById("srgdev-ncfp_talk_type"),null!==d&&(a=d.selectedIndex,1!==a&&2!==a&&(d.setAttribute("err","err"),d.addEventListener("focus",l,!1),t=1)),d=document.getElementById("srgdev-ncfp_fname"),d.value.length<2&&(d.setCustomValidity(n.name_required),d.addEventListener("input",l,!1),0===t&&d.reportValidity(),t=1),d=document.getElementById("srgdev-ncfp_femail"),(d.value.length<5||-1===d.value.indexOf("@")||d.value.indexOf("@")>d.value.lastIndexOf("."))&&(d.setCustomValidity(n.email_required),d.addEventListener("input",l,!1),0===t&&d.reportValidity(),t=1),d=document.getElementById("srgdev-ncfp_fphone"),null!==d&&(""===d.value||d.value.length<9||!1===/^[0-9 .()\-+,/]*$/.test(d.value))&&(d.setCustomValidity(n.phone_required),d.addEventListener("input",l,!1),0===t&&d.reportValidity(),t=1);let r=document.getElementById("srgdev-ncfp-main-inputs").children;for(let e,d=0,i=r.length;d<i;d++)if(e=r[d],e.hasAttribute("data-more")&&("INPUT"===e.tagName||"TEXTAREA"===e.tagName)){let d=e.value.trim();"r1"===e.getAttribute("data-more")&&""===d?(e.setCustomValidity(n.required),e.addEventListener("input",l,!1),0===t&&e.reportValidity(),t=1):e.hasAttribute("type")&&"number"===e.getAttribute("type")&&isNaN(d)&&(e.setCustomValidity(n.number_required),e.addEventListener("input",l,!1),0===t&&e.reportValidity(),t=1)}if(d=document.getElementById("appt_gdpr_id"),null!==d&&!1===d.checked&&(d.setAttribute("err","err"),d.setAttribute("required","1"),t=1),0!==t)return e.preventDefault(),e.stopPropagation(),!1;document.getElementById("srgdev-ncfp_fbtn-spinner").style.display="inline-block",d=document.createElement("input"),d.type="hidden",d.name="tzi",d.value=i,this.appendChild(d)}function c(e){document.body.removeEventListener("keyup",u),document.getElementById("srgdev-ncfp_frm").removeEventListener("focusin",m),null===e&&(e=document.getElementById("srgdev-dpu_main-cont")),e.removeAttribute("data-open")}function u(t){"Escape"!==t.key&&"Esc"!==t.key&&27!==t.keyCode||(c(null),e.preventDefault())}function m(e){e.target&&"DIV"!==e.target.nodeName.toUpperCase()&&"SPAN"!==e.target.nodeName.toUpperCase()&&document.getElementById("srgdev-dpu_main-date").firstAvailble.focus()}function p(e){let t=document.getElementById("srgdev-dpu_main-cont");if(null===t.getAttribute("data-open")){t.setAttribute("data-open",""),document.body.addEventListener("keyup",u);const e=document.getElementById("srgdev-dpu_main-date").curActive;e&&-1===e.indexOf("e")&&document.getElementById("srgdev-dpu_dc"+e).focus(),document.getElementById("srgdev-ncfp_frm").addEventListener("focusin",m)}else c(t);return e.preventDefault(),!1}function g(e){if(b(e)||I(e)){const e=document.getElementById("srgdev-dpu_tc_wrap");e&&e.firstChild.focus()}}function f(e){let t=this.id.slice(13),n=this.parentElement.curActive;if(n===t)return;n||(n=t);const d=+(""+t).replace("e",""),i=document.getElementById("srgdev-dpu_bf-cont"),a=Math.floor(d/5);a!==i.curDP&&(i.curDP=a,h(i)),document.getElementById("srgdev-dpu_dc"+n).removeAttribute("data-active"),document.getElementById("srgdev-dpu_dc"+t).setAttribute("data-active",""),this.parentElement.curActive=t,"e"===t.slice(-1)&&(t="e");const r=document.getElementById("srgdev-dpu_main-time");if(!r)throw new Error("srgdev-dpu_main-time missing");for(;r.firstChild;)r.removeChild(r.lastChild);if("e"!==t){const e=r.timePages[t];let n=document.createElement("div");if(n.className="srgdev-dpu-tc-full-date",n.appendChild(document.createTextNode(e.fullDate)),""!==e.tzn){const t=document.createElement("div");t.className="srgdev-dpu-tc-timezone",t.appendChild(document.createTextNode(e.tzn)),n.appendChild(t)}r.appendChild(n);const d=i.tuClass,a=document.createElement("div");a.className="srgdev-dpu-tc-tu-wrap",a.id="srgdev-dpu_tc_wrap",a.setAttribute("data-dm",e.dataDm),e.timeItems.forEach((e=>{const t=document.createElement("span");if(t.className=d,t.dpuClickID=e.dpuClickID,t.timeAt=e.timeAt,t.appendChild(document.createTextNode(e.time)),""!==e.title){const n=document.createElement("span");n.className="srgdev-dpu-appt-title",n.appendChild(document.createTextNode(e.title)),t.appendChild(n)}t.setAttribute("tabindex","0"),a.appendChild(t)})),r.appendChild(a)}else{const e=document.createElement("div");e.id="srgdev-dpu_tce",e.className="srgdev-dpu-time-cont",e.appendChild(document.createTextNode(document.getElementById("srgdev-ncfp_sel-hidden").getAttribute("data-tr-not-available"))),r.appendChild(e)}this.parentElement.parentElement.scrollLeft=0,e.stopPropagation()}function v(e){let t=e.target;if(void 0!==t.parentElement.dpuClickID&&(t=t.parentElement),void 0!==t.dpuClickID){document.getElementById("srgdev-ncfp_sel-dummy").value=t.parentElement.getAttribute("data-dm")+" - "+t.timeAt;let e=document.getElementById("srgdev-ncfp_sel-hidden");e.selectedIndex=t.dpuClickID,e.value=e.dataRef[t.dpuClickID].d;const n=e.dataRef[t.dpuClickID].dur;e=document.getElementById("srgdev-ncfp_dur-cont");const d=e.getAttribute("data-tr-hr"),i=e.getAttribute("data-tr-mn"),a=function(e){let t="";const n=e/60|0;n>0&&(t+=n+d+" ");const a=e-60*n;return t+(a>0?a+i:"")};if(null===n||1===n.length)e.style.display="none";else{const t=e.lastElementChild.children;t[0].textContent=a(n[0]);for(let d,i=1,r=Math.max(t.length,n.length);i<r;i++){if(i>=t.length)d=document.createElement("option"),d.className="srgdev-ncfp-form-option",d.appendChild(document.createTextNode("")),e.lastElementChild.appendChild(d);else if(d=t[i],i>=n.length){d.style.display="none";continue}d.style.display="block",d.value=i,d.textContent=a(n[i])}e.style.display="block"}e.lastElementChild.value=0,c(null)}}function h(e){let t;void 0!==e.target?(t=e.target.parentElement,"srgdev-dpu_bf-back"===e.target.id?t.curDP>0&&t.curDP--:(t.curDP<t.maxDP&&t.curDP++,t.curDP===t.maxDP?e.target.setAttribute("disabled",""):e.target.removeAttribute("disabled"))):t=e,0===t.curDP?t.firstElementChild.setAttribute("disabled",""):t.firstElementChild.removeAttribute("disabled"),t.curDP===t.maxDP?t.lastElementChild.setAttribute("disabled",""):t.lastElementChild.removeAttribute("disabled"),document.getElementById("srgdev-dpu_main-date").style.left="-"+5*t.curDP*4.6+"em",document.getElementById("srgdev-dpu_main-cont").scrollLeft=0}function E(e){if(void 0!==e.changedTouches&&e.changedTouches.length>0){const t=e.changedTouches[0],n=this.touchInfo;n.x=t.clientX,n.y=t.clientY,n.id=t.identifier}}function y(e){if(void 0!==e.changedTouches&&e.changedTouches.length>0){const t=e.changedTouches[0],n=this.touchInfo;if(t.identifier===n.id){const e=t.clientX-n.x|0,d=t.clientY-n.y|0;let i=e>>31,a=e+i^i;i=d>>31,a>(d+i^i)&&a>50&&(e<0?this.bfNav.lastElementChild.click():this.bfNav.firstElementChild.click())}n.id=-1}}function b(e){return" "===e.key||"Space"===e.code||32===e.keyCode}function I(e){return"Enter"===e.key||"Enter"===e.code||13===e.keyCode}sessionStorage.setItem("tokenSwissPost",t.innerHTML),t.remove(),window.addEventListener("DOMContentLoaded",(function(){let e=document.getElementById("appt_gdpr_id");null!==e&&(e.addEventListener("change",s),s.apply(e)),document.getElementById("srgdev-ncfp_fnpa").addEventListener("input",n),document.getElementById("srgdev-ncfp_fadress").addEventListener("input",d),document.getElementById("srgdev-ncfp_fnumber").addEventListener("input",i);let t=document.getElementById("srgdev-ncfp_frm");t.addEventListener("submit",o),setTimeout((function(){t.autocomplete="on"}),1e3);const a=function(e){let t={},n=e.split(".");for(let e,d=n.length,i=0;i<d;i++)e=n[i].split(":"),t[e[0]]=+e[1];return t}(t.getAttribute("data-pps"));(function(e){const t=document.getElementById("srgdev-ncfp-main-inputs"),n=new URLSearchParams((1&e.prefillInputs)>0?window.location.search:"");if(n){const d=e.prefilledType;for(let e of t.children)if(n.has(e.name))if(e.value=n.get(e.name),2===d){e.style.display="none";const t=document.querySelector(`label[for="${e.id}"]`);t&&(t.style.display="none")}else if(1===d){e.disabled=!0;const n=document.createElement("label");n.textContent=e.value,n.style.display="block",n.style.fontWeight="bold",t.insertBefore(n,e.nextSibling),e.style.display="none"}}})(a),function(e){const t="showEmpty",n="startFNED",d="showWeekends",i="showTZ",a="time2Cols",r="endTime";let s=7*e.nbrWeeks,l=document.getElementById("srgdev-ncfp_sel-hidden");if("2"!==l.getAttribute("data-state"))return void console.log("data-state: ",l.getAttribute("data-state"));const o=l.getAttribute("data-hdr"),u=l.getAttribute("data-tr-back"),m=l.getAttribute("data-tr-next");let p,C;p=void 0!==window.monthNames?window.monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],C=void 0!==window.dayNames?window.dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];const T=window.Intl&&"object"==typeof window.Intl,A=document.documentElement.hasAttribute("data-locale")?[document.documentElement.getAttribute("data-locale").replaceAll("_","-"),document.documentElement.lang]:[document.documentElement.lang];let _;const D=new URLSearchParams(window.location.search);if(D){const e=D.get("tz");if(e)try{_=Intl.DateTimeFormat(A,{timeZone:e}).resolvedOptions().timeZone}catch(e){console.error("can not parse tz param:",e),_=void 0}}let L,k,w,B,x;if(L=T?new Intl.DateTimeFormat(A,{hour:"numeric",minute:"2-digit",timeZone:_}).format:function(e){return e.toLocaleTimeString()},T){let e=new Intl.DateTimeFormat(A,{month:"long",timeZone:_});k=e.format}else k=function(e){return p[e.getMonth()]};if(T){let e=new Intl.DateTimeFormat(A,{weekday:"short",timeZone:_});w=e.format}else w=function(e){return C[e.getDay()]};B=T?new Intl.DateTimeFormat(A,{weekday:"short",month:"long",day:"2-digit",timeZone:_}).format:function(e){return e.toDateString()},x=T?new Intl.DateTimeFormat(A,{weekday:"long",month:"long",day:"numeric",year:"numeric",timeZone:_}).format:function(e){return e.toLocaleDateString()};let N,P=[];if(T){try{N=Intl.DateTimeFormat(A,{timeZone:_}).resolvedOptions().timeZone}catch(e){console.log("no Intl timeZone ",e)}"string"!=typeof N&&(N=void 0)}for(let t,n,d,i,a,s,o,c,u,m,p=new Date,g=e[r],f=l.getAttribute("data-info").split(","),v=f.length,h=0;h<v;h++){if(m=f[h],s=m.indexOf(":",8),p.setTime(1e3*+m.substr(1,s-1)),t=p.getTimezoneOffset(),d=m.charAt(0),i=a=L(p),u=p.getTime(),c=null,1!==g&&"T"!==d||(o=s+1,s=m.indexOf(":",o),"T"===d?(c=m.substr(o,s-o).split(";").map((e=>0|e)),1===g&&c.length<2&&(p.setTime(u+6e4*c[0]),i+=" - "+L(p))):(o=1e3*+m.substr(o,s-o),p.setTime(o),i+=" - "+L(p))),void 0!==N)n=d+N;else{let e=Math.abs(t),i=Math.floor(e/60),a=e-60*i;n=d+(t>0?"-":"+")+(i<10?"0"+i:i)+(a<10?"0"+a:a)}s++,o=m.indexOf(":",s),P[h]={rts:u,d:m.substr(s,o-s),t:m.substr(o+2),dur:c,tzi:n,time:i,timeAt:a}}P.sort(((e,t)=>e.rts>t.rts?1:-1)),P.push({rts:0,d:"",t:"",tzi:"",time:""}),l.dataRef=P;let S=P.length,M=document.createElement("div");M.id="srgdev-dpu_main-cont",M.className="srgdev-dpu-bkr-cls";let z=document.createElement("div");z.id="srgdev-dpu_main-header",z.appendChild(document.createTextNode(o)),M.appendChild(z);let O=document.createElement("div");O.maxDP=0,O.curDP=0,O.tuClass="",O.id="srgdev-dpu_bf-cont",O.appendChild(document.createElement("span")),O.appendChild(document.createElement("span")),O.firstElementChild.id="srgdev-dpu_bf-back",O.firstElementChild.appendChild(document.createTextNode(u)),O.firstElementChild.addEventListener("click",h),O.firstElementChild.setAttribute("disabled",""),O.lastElementChild.id="srgdev-dpu_bf-next",O.lastElementChild.appendChild(document.createTextNode(m)),O.lastElementChild.addEventListener("click",h),M.appendChild(O),z=document.createElement("div"),z.id="srgdev-dpu_main-date",z.className="srgdev-dpu-bkr-cls",z.style.left="0em",function(e,t){e.touchInfo={x:0,y:0,id:-1},e.bfNav=t,e.addEventListener("touchstart",E),e.addEventListener("touchend",y)}(z,O),M.appendChild(z);let H=document.createElement("div");H.id="srgdev-dpu_main-time",M.appendChild(H);let Z,V=0,R=5,F=new Date,q=-1,U=-1,$=!1,j=function(e,t){let n=document.createElement("div");n.id="srgdev-dpu_dc"+V+(t?"e":""),n.className="srgdev-dpu-date-cont"+(t?" srgdev-dpu-dc-empty":"");let d=document.createElement("span");return d.className=0!==e.getDay()?"srgdev-dpu-date-wd":"srgdev-dpu-date-wd srgdev-dpu-date-wd-sunday",d.appendChild(document.createTextNode(w(e))),n.appendChild(d),d=document.createElement("span"),d.className="srgdev-dpu-date-dn",d.appendChild(document.createTextNode(e.getDate())),n.appendChild(d),d=document.createElement("span"),d.className="srgdev-dpu-date-md",d.appendChild(document.createTextNode(k(e))),n.appendChild(d),n.addEventListener("click",f),t||(n.setAttribute("tabindex","0"),n.addEventListener("focus",f),n.addEventListener("keyup",g)),V===R&&(R+=5,O.maxDP++,V>s&&($=!0)),++V,n},W=new Date;if(W.setSeconds(1),W.setMinutes(0),W.setHours(0),1===e[t]&&0===e[n]){let e=P[0].rts;F.setTime(e),F.setSeconds(1),F.setMinutes(0),F.setHours(0);let t=F.getDay();t>0&&t<6&&W.setTime(F.getTime()-864e5*(t-1))}0===e[a]||1===e[r]?O.tuClass="srgdev-dpu-time-unit"+(1===e[r]?"_tn":""):O.tuClass="srgdev-dpu-time-unit2",Z=1===e[i]&&T?function(e){const t=e.toLocaleDateString(A,{timeZone:_}),n=e.toLocaleDateString(A,{timeZone:_,timeZoneName:"long"}),d=n.indexOf(t);return d>=0?(n.substring(0,d)+n.substring(d+t.length)).replace(/^[\s,.\-:;]+|[\s,.\-:;]+$/g,""):n}:function(){return""};const J=[];for(let n,i,a,r,s,l,o,c=0;c<S&&(l=P[c],n=l.rts,0!==n);c++){F.setTime(n);let u=100*(F.getMonth()+1)+F.getDate();if(q!==u){if(r=W.getTime(),W.setTime(F.getTime()),W.setSeconds(1),W.setMinutes(0),W.setHours(0),a=W.getTime(),1===e[t])for(;r<a&&(W.setTime(r),i=0===e[d]?W.getDay():1,0===i||6===i||(z.appendChild(j(W,!0)),J.push({lccIdx:-1,dataDm:"",timeItems:[],fullDate:"",tzn:""}),!$));)r+=864e5;if($){F=W;break}W.setTime(r+864e5),s=j(F,!1),-1===U&&(U=V-1,s.setAttribute("data-active",""),z.firstAvailble=s),z.appendChild(s),o={lccIdx:V-1,dataDm:B(F),timeItems:[],fullDate:x(F),tzn:Z(F)},J.push(o),q=u}o.timeItems.push({dpuClickID:c,timeAt:l.timeAt,time:l.time,title:l.t})}F.setSeconds(0),F.setMinutes(0),F.setHours(1),F.setTime(F.getTime()+864e5),H.timePages=J,M.addEventListener("click",v),M.addEventListener("keyup",(function(e){(b(e)||I(e))&&v(e)})),document.getElementById("srgdev-ncfp_sel_cont").appendChild(M),z.firstAvailble.click(),z.curActive=U.toString();let X=Math.floor(U/5);X>0&&(O.curDP=X,h(O)),O=document.createElement("div"),O.id="srgdev-dpu_main-hdr-icon",O.className="icon-close",O.addEventListener("click",(function(){c(null)})),O.role="button",O.addEventListener("keyup",(function(e){(b(e)||I(e))&&c(null)})),O.setAttribute("tabindex","0"),M.appendChild(O)}(a),document.getElementById("srgdev-ncfp_sel-dummy").addEventListener("click",p),document.getElementById("srgdev-ncfp_sel-dummy").addEventListener("keyup",(function(e){b(e)&&p(e)})),setTimeout((function(){let e,t=document.getElementById("srgdev-ncfp_fbtn");e=t.hasAttribute("data-tr-ses-to")?t.getAttribute("data-tr-ses-to"):"Session Timeout. Reload.",t.disabled=!0,t.textContent=e}),9e5)}))}();